#!/usr/bin/env python3
"""
Правильная постановка ударений для edge-tts в русском языке
"""

def add_russian_accents(text):
    """
    Добавляет ударения в русский текст для правильного произношения в edge-tts
    Символ ударения ́ (U+0301) ставится ПОСЛЕ ударной гласной
    """
    
    # Словарь с правильными ударениями
    accent_dict = {
        # Часто неправильно произносимые слова
        'процесс': 'проце́сс',
        'процессы': 'проце́ссы',
        'процесса': 'проце́сса',
        'процессов': 'проце́ссов',
        'процессом': 'проце́ссом',
        'процессе': 'проце́ссе',
        
        'проект': 'прое́кт',
        'проекты': 'прое́кты',
        'проекта': 'прое́кта',
        
        'модель': 'моде́ль',
        'модели': 'моде́ли',
        'моделью': 'моде́лью',
        
        'уровень': 'у́ровень',
        'уровня': 'у́ровня',
        'уровни': 'у́ровни',
        'уровнем': 'у́ровнем',
        
        'система': 'систе́ма',
        'системы': 'систе́мы',
        'системой': 'систе́мой',
        
        'анализ': 'ана́лиз',
        'анализа': 'ана́лиза',
        
        'метод': 'ме́тод',
        'методы': 'ме́тоды',
        'метода': 'ме́тода',
        
        'документ': 'докуме́нт',
        'документы': 'докуме́нты',
        'документа': 'докуме́нта',
        
        'компонент': 'компоне́нт',
        'компоненты': 'компоне́нты',
        
        'элемент': 'элеме́нт',
        'элементы': 'элеме́нты',
        
        # Слова с изменяющимся ударением
        'начало': 'нача́ло',
        'начала': 'начала́',  # прошедшее время
        'начал': 'на́чал',
        
        'принял': 'при́нял',
        'приняла': 'приняла́',
        'приняли': 'при́няли',
        
        'понял': 'по́нял',
        'поняла': 'поняла́',
        'поняли': 'по́няли',
        
        # Профессиональная терминология
        'менеджмент': 'ме́неджмент',
        'маркетинг': 'ма́ркетинг',
        'контроль': 'контро́ль',
        'контроля': 'контро́ля',
        
        # Слова с двойным ударением (основное и побочное)
        'высококачественный': 'высо̀кокаче́ственный',
        'взаимодействие': 'взаимоде́йствие',
        'взаимодействия': 'взаимоде́йствия',
    }
    
    result = text
    
    # Заменяем слова с учётом регистра
    import re
    for word, accented in accent_dict.items():
        # Точное совпадение слова (с учетом границ слова)
        pattern = r'\b' + re.escape(word) + r'\b'
        result = re.sub(pattern, accented, result, flags=re.IGNORECASE)
    
    return result

def remove_accents(text):
    """Удаляет символы ударения из текста"""
    # Символ ударения U+0301
    return text.replace('\u0301', '')

# Пример использования
if __name__ == "__main__":
    sample_text = """
    Процесс разработки системы включает несколько уровней.
    Модель проекта поможет провести анализ компонентов.
    Она приняла решение начать новый проект.
    """
    
    accented_text = add_russian_accents(sample_text)
    print("Оригинал:")
    print(sample_text)
    print("\nС ударениями для TTS:")
    print(accented_text)
    
    # Для проверки можно сохранить в файл
    with open('test_accents.txt', 'w', encoding='utf-8') as f:
        f.write(accented_text)